### Predicting: Deaths based on confirmed
state_CD_base_lm <-  lm(daily_total_deaths ~ daily_total_confirmed, data=offset_daily_df)
### Created Prediction data frame using the base model
### Build prediction based on Model
### State Confirmed/Deaths - state_CD_base_predict_df
state_CD_base_predict_df <- data.frame(
daily_total_deaths = predict(state_CD_base_lm,
newdata=offset_daily_df),
daily_total_confirmed=offset_daily_df$daily_total_confirmed)
### Analyze Base mode
## View the summary of your model using `summary()`
summary(state_CD_base_lm)
sqrt(.9467) ## R=.9729851
#### Get residuals from prediction
base_residual <- offset_daily_df$daily_total_deaths - state_CD_base_predict_df$daily_total_deaths
### Base Error
base_residual <- sum(base_residual^2)
### Build Model off of offset_9. This offset had the highest correlation value between confirmed and deaths.
state_CD_offset_9_lm <-  lm(daily_total_deaths ~ offset_9, data=offset_daily_df)
### Created Prediction data frame using offset_15
### Build prediction based on Model
state_CD_offset_9_predict_df <- data.frame(
daily_total_deaths = predict(state_CD_offset_9_lm,
newdata=offset_daily_df),
offset_9=offset_daily_df$offset_9)
### Analyze Offset_9
## View the summary of your model using `summary()`
summary(state_CD_offset_9_lm)
sqrt(.9619) ## R=0.980765
#### Get residuals from prediction - Subtract Death data from death prediction
offset_9_residual <- offset_daily_df$daily_total_deaths - state_CD_offset_9_predict_df$daily_total_deaths
### Base Error
offset_9_residual <- sum(offset_9_residual^2)
offset_9_residual
### Build Model off of offset_15. The given time from infection to death is 21 days. 5 days from infection to symptom.
### Assume quick testing, and 3 days turn around. Which is pretty optimistic but a good starting place
state_CD_offset_15_lm <-  lm(daily_total_deaths ~ offset_15, data=offset_daily_df)
### Created Prediction data frame using offset_15
### Build prediction based on Model
state_CD_offset_15_predict_df <- data.frame(
daily_total_deaths = predict(state_CD_offset_15_lm,
newdata=offset_daily_df),
offset_15=offset_daily_df$offset_15)
### Analyze Offset_15
## View the summary of your model using `summary()`
summary(state_CD_offset_15_lm)
sqrt(.9564) ## R=0.9779571
#### Get residuals from prediction - Subtract Death data from death prediction
offset_15_residual <- offset_daily_df$daily_total_deaths - state_CD_offset_15_predict_df$daily_total_deaths
### Base Error
offset_15_residual <- sum(offset_15_residuals^2)
### TRUE! Less Error than base Model, but visually....not quite aligning
offset_15_residual < base_residual
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = offset_daily_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) +
geom_point(color='blue') +
geom_line(color='blue',data = state_CD_base_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red',data = state_CD_offset_9_predict_df, aes(y=offset_9, x=daily_total_deaths)) +
geom_line(color='black',data = state_CD_offset_15_predict_df, aes(y=offset_15, x=daily_total_deaths))
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) +
geom_point(color='blue') +
geom_line(color='blue',data = june_CD_base_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black',data = june_CD_offset_9_predict_df, aes(y=offset_9, x=daily_total_deaths)) +
geom_line(color= 'red',data = june_CD_offset_13_predict_df, aes(y=offset_13, x=daily_total_deaths)) +
geom_line(color= 'purple',data = june_CD_offset_14_predict_df, aes(y=offset_14, x=daily_total_deaths))
june_base_residual <  june_offset_9_residual
june_base_residual
june_offset_9_residual
june_offset_13_residual
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed             , x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed            , x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed            , x=daily_total_deaths))
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=offset_9             , x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=offset_13            , x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=offset_14            , x=daily_total_deaths))
############################################################################
### Created Prediction data frame using the base model
### Build prediction based on Model
### State Confirmed/Deaths - state_CD_base_predict_df
############################################################################
june_CD_base_predict_df <- data.frame(
daily_total_deaths = predict(june_CD_base_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$daily_total_confirmed)
### Analyze Base mode
## View the summary of your model using `summary()`
summary(june_CD_base_lm)
sqrt(.9623) ## R=.9809689
#### Get residuals from prediction
june_base_residual <- june_offset_df$daily_total_deaths - june_CD_base_predict_df$daily_total_deaths
### Base Error
june_base_residual <- sum(june_base_residual^2)
### Look at offset Correlations for post June
### Offset 13 Has the highest correlation for post June
cor(june_offset_df[2:length(colnames(june_offset_df))])[2,]
############################################################################
### Build Offset 9 Model and Data Set
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
############################################################################
june_CD_offset_9_lm <-  lm(daily_total_deaths ~ offset_9, data=june_offset_df)
summary(june_CD_offset_9_lm)
sqrt(.9899) ## R=.9949372
june_CD_offset_9_predict_df <- data.frame(
daily_total_deaths = predict(june_CD_offset_9_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_9)
#### Get residuals from prediction
june_offset_9_residual <- june_offset_df$daily_total_deaths - june_CD_offset_9_predict_df$daily_total_deaths
### Base Error
june_offset_9_residual <- sum(june_offset_9_residual^2)
############################################################################
### Build Offset 13 Model and Data Set
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
############################################################################
june_CD_offset_13_lm <-  lm(daily_total_deaths ~ offset_13, data=june_offset_df)
summary(june_CD_offset_13_lm)
sqrt(.9957) ## R=.9978477
june_CD_offset_13_predict_df <- data.frame(
daily_total_deaths = predict(june_CD_offset_13_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_13)
#### Get residuals from prediction
june_offset_13_residual <- june_offset_df$daily_total_deaths - june_CD_offset_13_predict_df$daily_total_deaths
### Base Error
june_offset_13_residual <- sum(june_offset_13_residual^2)
############################################################################
### Build Offset 14 Model to test our assumptions that there is more error
############################################################################
june_CD_offset_14_lm <-  lm(daily_total_deaths ~ offset_14, data=june_offset_df)
summary(june_CD_offset_14_lm)
sqrt(.9957) ## R=.9978477
june_CD_offset_14_predict_df <- data.frame(
daily_total_deaths = predict(june_CD_offset_14_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_14)
#### Get residuals from prediction
june_offset_14_residual <- june_offset_df$daily_total_deaths - june_CD_offset_14_predict_df$daily_total_deaths
### Base Error
june_offset_14_residual <- sum(june_offset_14_residual^2)
june_base_residual <
june_offset_9_residual
june_base_residual
june_offset_9_residual
june_offset_13_residual
june_offset_14_residual
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
june_CD_base_predict_df
june_CD_offset_13_predict_df
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = date)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(x=daily_total_deaths))
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue')
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue')
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths), x=date)
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths), x=date) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths), x=date) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue')
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths, x=date))
june_CD_base_predict_df
june_CD_offset_9_predict_df <- data.frame( date=june_offset_df$date
daily_total_deaths = predict(june_CD_offset_9_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_9)
june_CD_offset_9_predict_df <- data.frame( date=june_offset_df$date,
daily_total_deaths = predict(june_CD_offset_9_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_9)
tail(june_CD_offset_9_predict_df)
june_offset_df <- offset_daily_df[76:nrow(offset_daily_df),]
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
june_CD_base_lm <-  lm(daily_total_deaths ~ daily_total_confirmed, data=june_offset_df)
############################################################################
### Created Prediction data frame using the base model
### Build prediction based on Model
### State Confirmed/Deaths - state_CD_base_predict_df
############################################################################
june_CD_base_predict_df <- data.frame( date=june_offset_df$date,
daily_total_deaths = predict(june_CD_base_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$daily_total_confirmed)
### Analyze Base mode
## View the summary of your model using `summary()`
summary(june_CD_base_lm)
sqrt(.9623) ## R=.9809689
#### Get residuals from prediction
june_base_residual <- june_offset_df$daily_total_deaths - june_CD_base_predict_df$daily_total_deaths
### Base Error
june_base_residual <- sum(june_base_residual^2)
### Look at offset Correlations for post June
### Offset 13 Has the highest correlation for post June
cor(june_offset_df[2:length(colnames(june_offset_df))])[2,]
############################################################################
### Build Offset 9 Model and Data Set
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
############################################################################
june_CD_offset_9_lm <-  lm(daily_total_deaths ~ offset_9, data=june_offset_df)
summary(june_CD_offset_9_lm)
sqrt(.9899) ## R=.9949372
june_CD_offset_9_predict_df <- data.frame( date=june_offset_df$date,
daily_total_deaths = predict(june_CD_offset_9_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_9)
#### Get residuals from prediction
june_offset_9_residual <- june_offset_df$daily_total_deaths - june_CD_offset_9_predict_df$daily_total_deaths
### Base Error
june_offset_9_residual <- sum(june_offset_9_residual^2)
############################################################################
### Build Offset 13 Model and Data Set
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
############################################################################
june_CD_offset_13_lm <-  lm(daily_total_deaths ~ offset_13, data=june_offset_df)
summary(june_CD_offset_13_lm)
sqrt(.9957) ## R=.9978477
june_CD_offset_13_predict_df <- data.frame(date=june_offset_df$date,
daily_total_deaths = predict(june_CD_offset_13_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_13)
#### Get residuals from prediction
june_offset_13_residual <- june_offset_df$daily_total_deaths - june_CD_offset_13_predict_df$daily_total_deaths
### Base Error
june_offset_13_residual <- sum(june_offset_13_residual^2)
############################################################################
### Build Offset 14 Model to test our assumptions that there is more error
############################################################################
june_CD_offset_14_lm <-  lm(daily_total_deaths ~ offset_14, data=june_offset_df)
summary(june_CD_offset_14_lm)
sqrt(.9957) ## R=.9978477
june_CD_offset_14_predict_df <- data.frame(date=june_offset_df$date,
daily_total_deaths = predict(june_CD_offset_14_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$offset_14)
#### Get residuals from prediction
june_offset_14_residual <- june_offset_df$daily_total_deaths - june_CD_offset_14_predict_df$daily_total_deaths
### Base Error
june_offset_14_residual <- sum(june_offset_14_residual^2)
june_base_residual
june_offset_9_residual
june_offset_13_residual
june_offset_14_residual
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths, x=date))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,  aes(y=daily_total_deaths, x=daily_total_confirmed))
ggplot(data = june_offset_df, aes(y = daily_total_deaths, x = date)) + geom_point(color='blue')
ggplot(data = june_offset_df,                              aes(y=daily_total_deaths, x = date)) + geom_point(color='blue') +
geom_line(color='blue',data = june_CD_base_predict_df,  aes(y=daily_total_deaths))
ggplot() +
geom_point(data = june_offset_df, aes(y=daily_total_deaths, x = date)color='blue')
ggplot() + geom_point(data = june_offset_df, aes(y=daily_total_deaths, x = date)color='blue')
ggplot(data = june_offset_df) + geom_point(data = june_offset_df, aes(y=daily_total_deaths, x = date)color='blue')
ggplot() + geom_point(data = june_offset_df, aes(y=daily_total_deaths, x = date), color='blue')
geom_line (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date))
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') +
geom_line (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date))
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') +
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date))
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') +
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') +
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')+
#geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_deaths))
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') +
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')+
#geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_deaths,x=date))
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') +
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')+
#geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
geom_point(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_deaths,x=date))
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') +
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')+
#geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
geom_point(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_deaths,x=date)) + geom_smooth()
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') + geom_smooth()
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')+ geom_smooth() +
#geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_deaths))
geom_point(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_deaths,x=date))
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') + geom_smooth() +
geom_point (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')+ geom_smooth()
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = date), color='blue') + geom_smooth() +
geom_smooth (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=date), color='blue')
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = daily_total_confirmed), color='blue') + geom_smooth() +
geom_smooth (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=daily_total_confirmed), color='blue')
ggplot() +
geom_point(data=june_offset_df,          aes(y=daily_total_deaths, x = daily_total_confirmed), color='blue') + geom_smooth() +
geom_line (data=june_CD_base_predict_df, aes(y=daily_total_deaths,x=daily_total_confirmed), color='blue')
ggplot() +
geom_point(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths), color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
ggplot() +
geom_point(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths), color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
ggplot() +
geom_point(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths), color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
june_offset_df <- offset_daily_df[76:nrow(offset_daily_df),]
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
june_CD_base_lm <-  lm(daily_total_deaths ~ daily_total_confirmed, data=june_offset_df)
june_offset_df <- offset_daily_df[76:nrow(offset_daily_df),]
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
june_CD_base_lm <-  lm(daily_total_deaths ~ daily_total_confirmed, data=june_offset_df)
############################################################################
### Created Prediction data frame using the base model
### Build prediction based on Model
### State Confirmed/Deaths - state_CD_base_predict_df
############################################################################
june_CD_base_predict_df <- data.frame( date=june_offset_df$date,
daily_total_deaths = predict(june_CD_base_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$daily_total_confirmed)
### Analyze Base mode
## View the summary of your model using `summary()`
summary(june_CD_base_lm)
sqrt(.9623) ## R=.9809689
#### Get residuals from prediction
june_base_residual <- june_offset_df$daily_total_deaths - june_CD_base_predict_df$daily_total_deaths
### Base Error
june_base_residual <- sum(june_base_residual^2)
### Look at offset Correlations for post June
### Offset 13 Has the highest correlation for post June
cor(june_offset_df[2:length(colnames(june_offset_df))])[2,]
############################################################################
### Build Offset 9 Model and Data Set
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
############################################################################
june_CD_offset_9_lm <-  lm(daily_total_deaths ~ offset_9, data=june_offset_df)
summary(june_CD_offset_9_lm)
sqrt(.9899) ## R=.9949372
june_CD_offset_9_predict_df <- data.frame( date=june_offset_df$date,
daily_total_deaths = predict(june_CD_offset_9_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$daily_total_confirmed)
#### Get residuals from prediction
june_offset_9_residual <- june_offset_df$daily_total_deaths - june_CD_offset_9_predict_df$daily_total_deaths
### Base Error
june_offset_9_residual <- sum(june_offset_9_residual^2)
############################################################################
### Build Offset 13 Model and Data Set
### Base Model comparing confirmed and deaths for Post June data
### Predicting: Deaths based on confirmed
############################################################################
june_CD_offset_13_lm <-  lm(daily_total_deaths ~ offset_13, data=june_offset_df)
summary(june_CD_offset_13_lm)
sqrt(.9957) ## R=.9978477
june_CD_offset_13_predict_df <- data.frame(date=june_offset_df$date,
daily_total_deaths = predict(june_CD_offset_13_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$daily_total_confirmed)
#### Get residuals from prediction
june_offset_13_residual <- june_offset_df$daily_total_deaths - june_CD_offset_13_predict_df$daily_total_deaths
### Base Error
june_offset_13_residual <- sum(june_offset_13_residual^2)
############################################################################
### Build Offset 14 Model to test our assumptions that there is more error
############################################################################
june_CD_offset_14_lm <-  lm(daily_total_deaths ~ offset_14, data=june_offset_df)
summary(june_CD_offset_14_lm)
sqrt(.9957) ## R=.9978477
june_CD_offset_14_predict_df <- data.frame(date=june_offset_df$date,
daily_total_deaths = predict(june_CD_offset_14_lm,
newdata=june_offset_df),
daily_total_confirmed=june_offset_df$daily_total_confirmed)
#### Get residuals from prediction
june_offset_14_residual <- june_offset_df$daily_total_deaths - june_CD_offset_14_predict_df$daily_total_deaths
### Base Error
june_offset_14_residual <- sum(june_offset_14_residual^2)
june_base_residual
june_offset_9_residual
june_offset_13_residual
june_offset_14_residual
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='purple',data = june_CD_offset_14_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths)) +
june_CD_base_predict_df
######################################################################################
#### Verify work with Plot
######################################################################################
## Blue Base plot: Confirmed by deaths over time -
## Red Offset_9
## Black Offset_16
ggplot(data = june_offset_df, aes(y = daily_total_confirmed, x = daily_total_deaths)) + geom_point(color='blue') +
geom_line(color='blue'  ,data = june_CD_base_predict_df,      aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='black' ,data = june_CD_offset_9_predict_df,  aes(y=daily_total_confirmed, x=daily_total_deaths)) +
geom_line(color='red'   ,data = june_CD_offset_13_predict_df, aes(y=daily_total_confirmed, x=daily_total_deaths))
